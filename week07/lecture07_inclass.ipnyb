{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "secret-viking",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "referenced-bracelet",
   "metadata": {},
   "outputs": [],
   "source": [
    "counties = pd.read_csv(\"https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv\",\n",
    "                       parse_dates = [\"date\"])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "reserved-james",
   "metadata": {},
   "outputs": [],
   "source": [
    "del counties[\"deaths\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "international-technology",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date</th>\n",
       "      <th>county</th>\n",
       "      <th>state</th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2020-01-21</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061.0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2020-01-22</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061.0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2020-01-23</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061.0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Cook</td>\n",
       "      <td>Illinois</td>\n",
       "      <td>17031.0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061.0</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502827</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Sweetwater</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56037.0</td>\n",
       "      <td>11088</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502828</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Teton</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56039.0</td>\n",
       "      <td>10074</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502829</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Uinta</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56041.0</td>\n",
       "      <td>5643</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502830</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Washakie</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56043.0</td>\n",
       "      <td>2358</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502831</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Weston</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56045.0</td>\n",
       "      <td>1588</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2502832 rows × 5 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "              date      county       state     fips  cases\n",
       "0       2020-01-21   Snohomish  Washington  53061.0      1\n",
       "1       2020-01-22   Snohomish  Washington  53061.0      1\n",
       "2       2020-01-23   Snohomish  Washington  53061.0      1\n",
       "3       2020-01-24        Cook    Illinois  17031.0      1\n",
       "4       2020-01-24   Snohomish  Washington  53061.0      1\n",
       "...            ...         ...         ...      ...    ...\n",
       "2502827 2022-05-13  Sweetwater     Wyoming  56037.0  11088\n",
       "2502828 2022-05-13       Teton     Wyoming  56039.0  10074\n",
       "2502829 2022-05-13       Uinta     Wyoming  56041.0   5643\n",
       "2502830 2022-05-13    Washakie     Wyoming  56043.0   2358\n",
       "2502831 2022-05-13      Weston     Wyoming  56045.0   1588\n",
       "\n",
       "[2502832 rows x 5 columns]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "counties"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "geological-trick",
   "metadata": {},
   "outputs": [],
   "source": [
    "states = pd.read_csv(\"https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv\",\n",
    "                       parse_dates = [\"date\"])\n",
    "del states[\"deaths\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "electronic-coordination",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>count</th>\n",
       "      <td>61942.000000</td>\n",
       "      <td>6.194200e+04</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>mean</th>\n",
       "      <td>32.247958</td>\n",
       "      <td>8.898301e+05</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>std</th>\n",
       "      <td>18.788383</td>\n",
       "      <td>1.470231e+06</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>min</th>\n",
       "      <td>1.000000</td>\n",
       "      <td>1.000000e+00</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25%</th>\n",
       "      <td>17.000000</td>\n",
       "      <td>7.078350e+04</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>50%</th>\n",
       "      <td>31.000000</td>\n",
       "      <td>3.514960e+05</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>75%</th>\n",
       "      <td>46.000000</td>\n",
       "      <td>1.043231e+06</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>max</th>\n",
       "      <td>78.000000</td>\n",
       "      <td>1.216916e+07</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               fips         cases\n",
       "count  61942.000000  6.194200e+04\n",
       "mean      32.247958  8.898301e+05\n",
       "std       18.788383  1.470231e+06\n",
       "min        1.000000  1.000000e+00\n",
       "25%       17.000000  7.078350e+04\n",
       "50%       31.000000  3.514960e+05\n",
       "75%       46.000000  1.043231e+06\n",
       "max       78.000000  1.216916e+07"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "states.describe()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "creative-spotlight",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date</th>\n",
       "      <th>state</th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2020-01-21</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2020-01-22</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2020-01-23</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>61937</th>\n",
       "      <td>2023-03-23</td>\n",
       "      <td>Virginia</td>\n",
       "      <td>51</td>\n",
       "      <td>2298300</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>61938</th>\n",
       "      <td>2023-03-23</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>1940704</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>61939</th>\n",
       "      <td>2023-03-23</td>\n",
       "      <td>West Virginia</td>\n",
       "      <td>54</td>\n",
       "      <td>645710</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>61940</th>\n",
       "      <td>2023-03-23</td>\n",
       "      <td>Wisconsin</td>\n",
       "      <td>55</td>\n",
       "      <td>2014524</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>61941</th>\n",
       "      <td>2023-03-23</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56</td>\n",
       "      <td>185800</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>61942 rows × 4 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "            date          state  fips    cases\n",
       "0     2020-01-21     Washington    53        1\n",
       "1     2020-01-22     Washington    53        1\n",
       "2     2020-01-23     Washington    53        1\n",
       "3     2020-01-24       Illinois    17        1\n",
       "4     2020-01-24     Washington    53        1\n",
       "...          ...            ...   ...      ...\n",
       "61937 2023-03-23       Virginia    51  2298300\n",
       "61938 2023-03-23     Washington    53  1940704\n",
       "61939 2023-03-23  West Virginia    54   645710\n",
       "61940 2023-03-23      Wisconsin    55  2014524\n",
       "61941 2023-03-23        Wyoming    56   185800\n",
       "\n",
       "[61942 rows x 4 columns]"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "states"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "novel-capital",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "date     datetime64[ns]\n",
       "state            object\n",
       "fips              int64\n",
       "cases             int64\n",
       "dtype: object"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "states.dtypes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "compatible-sheriff",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "date      datetime64[ns]\n",
       "county            object\n",
       "state             object\n",
       "fips             float64\n",
       "cases              int64\n",
       "dtype: object"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "counties.dtypes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "id": "restricted-wheat",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "<ipython-input-10-6b27f2aa86af>:2: SettingWithCopyWarning: \n",
      "A value is trying to be set on a copy of a slice from a DataFrame.\n",
      "Try using .loc[row_indexer,col_indexer] = value instead\n",
      "\n",
      "See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n",
      "  counties[\"fips\"] = counties[\"fips\"].astype(\"int64\")\n"
     ]
    }
   ],
   "source": [
    "counties = counties.dropna()\n",
    "counties[\"fips\"] = counties[\"fips\"].astype(\"int64\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "id": "interim-comfort",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date</th>\n",
       "      <th>county</th>\n",
       "      <th>state</th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2020-01-21</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2020-01-22</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2020-01-23</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Cook</td>\n",
       "      <td>Illinois</td>\n",
       "      <td>17031</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2020-01-24</td>\n",
       "      <td>Snohomish</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53061</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502827</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Sweetwater</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56037</td>\n",
       "      <td>11088</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502828</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Teton</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56039</td>\n",
       "      <td>10074</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502829</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Uinta</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56041</td>\n",
       "      <td>5643</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502830</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Washakie</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56043</td>\n",
       "      <td>2358</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2502831</th>\n",
       "      <td>2022-05-13</td>\n",
       "      <td>Weston</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56045</td>\n",
       "      <td>1588</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2479154 rows × 5 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "              date      county       state   fips  cases\n",
       "0       2020-01-21   Snohomish  Washington  53061      1\n",
       "1       2020-01-22   Snohomish  Washington  53061      1\n",
       "2       2020-01-23   Snohomish  Washington  53061      1\n",
       "3       2020-01-24        Cook    Illinois  17031      1\n",
       "4       2020-01-24   Snohomish  Washington  53061      1\n",
       "...            ...         ...         ...    ...    ...\n",
       "2502827 2022-05-13  Sweetwater     Wyoming  56037  11088\n",
       "2502828 2022-05-13       Teton     Wyoming  56039  10074\n",
       "2502829 2022-05-13       Uinta     Wyoming  56041   5643\n",
       "2502830 2022-05-13    Washakie     Wyoming  56043   2358\n",
       "2502831 2022-05-13      Weston     Wyoming  56045   1588\n",
       "\n",
       "[2479154 rows x 5 columns]"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "counties"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "sapphire-future",
   "metadata": {},
   "outputs": [],
   "source": [
    "illinois_results = states[states[\"state\"] == \"Illinois\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "retired-microphone",
   "metadata": {},
   "outputs": [],
   "source": [
    "il_by_date = illinois_results.set_index(\"date\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "id": "useful-priest",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>state</th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>date</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>2020-01-24</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-01-25</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-01-26</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-01-27</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-01-28</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-09-26</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>289683</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-09-27</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>291271</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-09-28</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>293169</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-09-29</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>294673</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2020-09-30</th>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>296935</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>251 rows × 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "               state  fips   cases\n",
       "date                              \n",
       "2020-01-24  Illinois    17       1\n",
       "2020-01-25  Illinois    17       1\n",
       "2020-01-26  Illinois    17       1\n",
       "2020-01-27  Illinois    17       1\n",
       "2020-01-28  Illinois    17       1\n",
       "...              ...   ...     ...\n",
       "2020-09-26  Illinois    17  289683\n",
       "2020-09-27  Illinois    17  291271\n",
       "2020-09-28  Illinois    17  293169\n",
       "2020-09-29  Illinois    17  294673\n",
       "2020-09-30  Illinois    17  296935\n",
       "\n",
       "[251 rows x 3 columns]"
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "il_by_date.loc[\"2020-01-01\":\"2020-09-30\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "brief-wilson",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Matplotlib created a temporary config/cache directory at /tmp/matplotlib-cwz49ncd because the default path (/tmp/cache/matplotlib) is not a writable directory; it is highly recommended to set the MPLCONFIGDIR environment variable to a writable directory, in particular to speed up the import of Matplotlib and to better support multiprocessing.\n"
     ]
    }
   ],
   "source": [
    "import matplotlib.pyplot as plt"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "id": "joined-enhancement",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig, ax = plt.subplots()\n",
    "ax.plot(\"cases\", data=il_by_date)\n",
    "plt.xticks(rotation=90);"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "angry-diabetes",
   "metadata": {},
   "outputs": [],
   "source": []
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "id": "attached-scanning",
   "metadata": {},
   "outputs": [],
   "source": [
    "import bqplot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "id": "automatic-struggle",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "44e47916e7484a1ca19ea50d976c7e70",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Figure(axes=[Axis(label='Date', scale=DateScale()), Axis(label='Cases (cumulative)', orientation='vertical', s…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "x_sc = bqplot.DateScale()\n",
    "y_sc = bqplot.LinearScale()\n",
    "\n",
    "x_ax = bqplot.Axis(scale = x_sc, label = \"Date\")\n",
    "y_ax = bqplot.Axis(scale = y_sc, label = \"Cases (cumulative)\", orientation = \"vertical\")\n",
    "\n",
    "lines = bqplot.Lines(x = il_by_date.index, y = il_by_date[\"cases\"], scales = {'x': x_sc, 'y': y_sc})\n",
    "fig = bqplot.Figure(marks = [lines], axes = [x_ax, y_ax])\n",
    "display(fig)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "id": "precise-receiver",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "d07810437dc240fea340c3ecacc60fbc",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Figure(axes=[Axis(label='Date', scale=DateScale()), Axis(label='Cases (cumulative)', orientation='vertical', s…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "x_sc = bqplot.DateScale()\n",
    "y_sc = bqplot.LinearScale()\n",
    "\n",
    "x_ax = bqplot.Axis(scale = x_sc, label = \"Date\")\n",
    "y_ax = bqplot.Axis(scale = y_sc, label = \"Cases (cumulative)\", orientation = \"vertical\")\n",
    "\n",
    "lines = bqplot.Lines(x = il_by_date.index, y = il_by_date[\"cases\"], scales = {'x': x_sc, 'y': y_sc})\n",
    "\n",
    "date_selection = bqplot.interacts.FastIntervalSelector(scale = x_sc)\n",
    "\n",
    "fig = bqplot.Figure(marks = [lines], axes = [x_ax, y_ax], interaction = date_selection)\n",
    "display(fig)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "id": "smart-arrival",
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 71,
   "id": "spare-plastic",
   "metadata": {},
   "outputs": [],
   "source": [
    "date_selection.selected = np.array(['2022-01-16', '2023-01-10'], dtype='datetime64')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 72,
   "id": "relevant-twelve",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "FastIntervalSelector(scale=DateScale(), selected=array(['2022-01-16', '2023-01-10'], dtype='datetime64[D]'))"
      ]
     },
     "execution_count": 72,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "date_selection"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 73,
   "id": "faced-sentence",
   "metadata": {},
   "outputs": [],
   "source": [
    "import ipywidgets"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "id": "analyzed-missouri",
   "metadata": {},
   "outputs": [],
   "source": [
    "start = ipywidgets.DatePicker()\n",
    "end = ipywidgets.DatePicker()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 75,
   "id": "competent-bracelet",
   "metadata": {},
   "outputs": [],
   "source": [
    "import traitlets"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 79,
   "id": "atmospheric-atlantic",
   "metadata": {},
   "outputs": [],
   "source": [
    "def selection_changed(change):\n",
    "    start.value = pd.Timestamp(change['new'][0]).to_pydatetime()\n",
    "    end.value = pd.Timestamp(change['new'][1]).to_pydatetime()\n",
    "\n",
    "def picker_changed(change):\n",
    "    date_selection.selected = np.array([start.value, end.value], dtype='datetime64')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 80,
   "id": "romance-carol",
   "metadata": {},
   "outputs": [],
   "source": [
    "start.observe(picker_changed, ['value'])\n",
    "end.observe(picker_changed, ['value'])\n",
    "date_selection.observe(selection_changed, ['selected'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 77,
   "id": "known-brush",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "87586de160b1412f934b050804bfff90",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "VBox(children=(HBox(children=(DatePicker(value=None), DatePicker(value=None))), Figure(axes=[Axis(label='Date'…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "ipywidgets.VBox([ipywidgets.HBox([start, end]), fig])"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "incredible-cargo",
   "metadata": {},
   "source": [
    "## Link the selection to the date pickers `start` and `end`"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 81,
   "id": "mighty-history",
   "metadata": {},
   "outputs": [],
   "source": [
    "state_map = bqplot.topo_load(\"map_data/USStatesMap.json\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 89,
   "id": "gorgeous-entertainment",
   "metadata": {},
   "outputs": [],
   "source": [
    "cases_by_fips = states[states[\"date\"] == \"2022-04-01\"].groupby(\"fips\")[\"cases\"].max().to_dict()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 91,
   "id": "lined-effects",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "8e1621def5f944d7a9604bc375fc6f2d",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Figure(axes=[ColorAxis(scale=ColorScale(scheme='BuPu'))], fig_margin={'top': 60, 'bottom': 60, 'left': 60, 'ri…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "proj = bqplot.AlbersUSA()\n",
    "color_sc = bqplot.ColorScale(scheme = \"BuPu\")\n",
    "color_ax = bqplot.ColorAxis(scale = color_sc)\n",
    "map_mark = bqplot.Map(\n",
    "    map_data = state_map,\n",
    "    scales = {'projection': proj, 'color': color_sc},\n",
    "    color = cases_by_fips\n",
    ")\n",
    "fig = bqplot.Figure(marks = [map_mark], axes = [color_ax])\n",
    "display(fig)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 93,
   "id": "cultural-output",
   "metadata": {},
   "outputs": [],
   "source": [
    "label = ipywidgets.Label()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 94,
   "id": "incredible-advocate",
   "metadata": {},
   "outputs": [],
   "source": [
    "def hover_over_state(mark, hover_info):\n",
    "    label.value = \"State %s had %s cases\" % (hover_info[\"data\"][\"name\"], hover_info[\"data\"][\"color\"])\n",
    "map_mark.on_hover(hover_over_state)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 95,
   "id": "ongoing-flash",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "9c39086969c44a288bbbf765fa17b867",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Label(value='')"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "label"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 97,
   "id": "psychological-terminology",
   "metadata": {},
   "outputs": [],
   "source": [
    "usa_cases_by_date = states.groupby(\"date\")[\"cases\"].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 122,
   "id": "exotic-chancellor",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "b7afe07071bf4c599e60ce66908ff087",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Figure(axes=[Axis(label='Date', scale=DateScale()), Axis(label='Cases (cumulative)', orientation='vertical', s…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "x_sc = bqplot.DateScale()\n",
    "y_sc = bqplot.LinearScale()\n",
    "\n",
    "x_ax = bqplot.Axis(scale = x_sc, label = \"Date\")\n",
    "y_ax = bqplot.Axis(scale = y_sc, label = \"Cases (cumulative)\", orientation = \"vertical\")\n",
    "\n",
    "lines = bqplot.Lines(x = usa_cases_by_date.index, y = usa_cases_by_date.values, scales = {'x': x_sc, 'y': y_sc})\n",
    "\n",
    "date_selection = bqplot.interacts.IndexSelector(scale = x_sc)\n",
    "\n",
    "fig1 = bqplot.Figure(marks = [lines], axes = [x_ax, y_ax], interaction = date_selection)\n",
    "display(fig1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 101,
   "id": "popular-operator",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "array(['2021-01-25T03:10:57.422'], dtype='datetime64[ms]')"
      ]
     },
     "execution_count": 101,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "date_selection.selected"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 112,
   "id": "negative-enough",
   "metadata": {},
   "outputs": [],
   "source": [
    "import datetime"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 121,
   "id": "about-serbia",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>date</th>\n",
       "      <th>state</th>\n",
       "      <th>fips</th>\n",
       "      <th>cases</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>18054</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Alabama</td>\n",
       "      <td>1</td>\n",
       "      <td>443009</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18055</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Alaska</td>\n",
       "      <td>2</td>\n",
       "      <td>53061</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18056</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Arizona</td>\n",
       "      <td>4</td>\n",
       "      <td>728231</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18057</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Arkansas</td>\n",
       "      <td>5</td>\n",
       "      <td>284702</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18058</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>California</td>\n",
       "      <td>6</td>\n",
       "      <td>3212939</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18059</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Colorado</td>\n",
       "      <td>8</td>\n",
       "      <td>389227</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18060</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Connecticut</td>\n",
       "      <td>9</td>\n",
       "      <td>243632</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18061</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Delaware</td>\n",
       "      <td>10</td>\n",
       "      <td>75191</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18062</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>District of Columbia</td>\n",
       "      <td>11</td>\n",
       "      <td>35505</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18063</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Florida</td>\n",
       "      <td>12</td>\n",
       "      <td>1658161</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18064</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Georgia</td>\n",
       "      <td>13</td>\n",
       "      <td>847036</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18065</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Guam</td>\n",
       "      <td>66</td>\n",
       "      <td>8523</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18066</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Hawaii</td>\n",
       "      <td>15</td>\n",
       "      <td>25209</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18067</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Idaho</td>\n",
       "      <td>16</td>\n",
       "      <td>160182</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18068</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Illinois</td>\n",
       "      <td>17</td>\n",
       "      <td>1107388</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18069</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Indiana</td>\n",
       "      <td>18</td>\n",
       "      <td>616310</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18070</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Iowa</td>\n",
       "      <td>19</td>\n",
       "      <td>313907</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18071</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Kansas</td>\n",
       "      <td>20</td>\n",
       "      <td>272220</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18072</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Kentucky</td>\n",
       "      <td>21</td>\n",
       "      <td>351462</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18073</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Louisiana</td>\n",
       "      <td>22</td>\n",
       "      <td>385942</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18074</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Maine</td>\n",
       "      <td>23</td>\n",
       "      <td>37046</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18075</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Maryland</td>\n",
       "      <td>24</td>\n",
       "      <td>343353</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18076</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Massachusetts</td>\n",
       "      <td>25</td>\n",
       "      <td>503688</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18077</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Michigan</td>\n",
       "      <td>26</td>\n",
       "      <td>597781</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18078</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Minnesota</td>\n",
       "      <td>27</td>\n",
       "      <td>455851</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18079</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Mississippi</td>\n",
       "      <td>28</td>\n",
       "      <td>265146</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18080</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Missouri</td>\n",
       "      <td>29</td>\n",
       "      <td>489865</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18081</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Montana</td>\n",
       "      <td>30</td>\n",
       "      <td>91905</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18082</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Nebraska</td>\n",
       "      <td>31</td>\n",
       "      <td>188850</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18083</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Nevada</td>\n",
       "      <td>32</td>\n",
       "      <td>272006</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18084</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>New Hampshire</td>\n",
       "      <td>33</td>\n",
       "      <td>62768</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18085</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>New Jersey</td>\n",
       "      <td>34</td>\n",
       "      <td>666951</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18086</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>New Mexico</td>\n",
       "      <td>35</td>\n",
       "      <td>169696</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18087</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>New York</td>\n",
       "      <td>36</td>\n",
       "      <td>1347924</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18088</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>North Carolina</td>\n",
       "      <td>37</td>\n",
       "      <td>724154</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18089</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>North Dakota</td>\n",
       "      <td>38</td>\n",
       "      <td>96899</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18090</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Northern Mariana Islands</td>\n",
       "      <td>69</td>\n",
       "      <td>129</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18091</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Ohio</td>\n",
       "      <td>39</td>\n",
       "      <td>868656</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18092</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Oklahoma</td>\n",
       "      <td>40</td>\n",
       "      <td>374853</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18093</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Oregon</td>\n",
       "      <td>41</td>\n",
       "      <td>138587</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18094</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Pennsylvania</td>\n",
       "      <td>42</td>\n",
       "      <td>813665</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18095</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Puerto Rico</td>\n",
       "      <td>72</td>\n",
       "      <td>125211</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18096</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Rhode Island</td>\n",
       "      <td>44</td>\n",
       "      <td>111754</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18097</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>South Carolina</td>\n",
       "      <td>45</td>\n",
       "      <td>421417</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18098</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>South Dakota</td>\n",
       "      <td>46</td>\n",
       "      <td>107180</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18099</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Tennessee</td>\n",
       "      <td>47</td>\n",
       "      <td>695935</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18100</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Texas</td>\n",
       "      <td>48</td>\n",
       "      <td>2268260</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18101</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Utah</td>\n",
       "      <td>49</td>\n",
       "      <td>337269</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18102</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Vermont</td>\n",
       "      <td>50</td>\n",
       "      <td>11165</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18103</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Virgin Islands</td>\n",
       "      <td>78</td>\n",
       "      <td>2350</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18104</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Virginia</td>\n",
       "      <td>51</td>\n",
       "      <td>478619</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18105</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Washington</td>\n",
       "      <td>53</td>\n",
       "      <td>306489</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18106</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>West Virginia</td>\n",
       "      <td>54</td>\n",
       "      <td>115839</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18107</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Wisconsin</td>\n",
       "      <td>55</td>\n",
       "      <td>582477</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18108</th>\n",
       "      <td>2021-01-25</td>\n",
       "      <td>Wyoming</td>\n",
       "      <td>56</td>\n",
       "      <td>51062</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "            date                     state  fips    cases\n",
       "18054 2021-01-25                   Alabama     1   443009\n",
       "18055 2021-01-25                    Alaska     2    53061\n",
       "18056 2021-01-25                   Arizona     4   728231\n",
       "18057 2021-01-25                  Arkansas     5   284702\n",
       "18058 2021-01-25                California     6  3212939\n",
       "18059 2021-01-25                  Colorado     8   389227\n",
       "18060 2021-01-25               Connecticut     9   243632\n",
       "18061 2021-01-25                  Delaware    10    75191\n",
       "18062 2021-01-25      District of Columbia    11    35505\n",
       "18063 2021-01-25                   Florida    12  1658161\n",
       "18064 2021-01-25                   Georgia    13   847036\n",
       "18065 2021-01-25                      Guam    66     8523\n",
       "18066 2021-01-25                    Hawaii    15    25209\n",
       "18067 2021-01-25                     Idaho    16   160182\n",
       "18068 2021-01-25                  Illinois    17  1107388\n",
       "18069 2021-01-25                   Indiana    18   616310\n",
       "18070 2021-01-25                      Iowa    19   313907\n",
       "18071 2021-01-25                    Kansas    20   272220\n",
       "18072 2021-01-25                  Kentucky    21   351462\n",
       "18073 2021-01-25                 Louisiana    22   385942\n",
       "18074 2021-01-25                     Maine    23    37046\n",
       "18075 2021-01-25                  Maryland    24   343353\n",
       "18076 2021-01-25             Massachusetts    25   503688\n",
       "18077 2021-01-25                  Michigan    26   597781\n",
       "18078 2021-01-25                 Minnesota    27   455851\n",
       "18079 2021-01-25               Mississippi    28   265146\n",
       "18080 2021-01-25                  Missouri    29   489865\n",
       "18081 2021-01-25                   Montana    30    91905\n",
       "18082 2021-01-25                  Nebraska    31   188850\n",
       "18083 2021-01-25                    Nevada    32   272006\n",
       "18084 2021-01-25             New Hampshire    33    62768\n",
       "18085 2021-01-25                New Jersey    34   666951\n",
       "18086 2021-01-25                New Mexico    35   169696\n",
       "18087 2021-01-25                  New York    36  1347924\n",
       "18088 2021-01-25            North Carolina    37   724154\n",
       "18089 2021-01-25              North Dakota    38    96899\n",
       "18090 2021-01-25  Northern Mariana Islands    69      129\n",
       "18091 2021-01-25                      Ohio    39   868656\n",
       "18092 2021-01-25                  Oklahoma    40   374853\n",
       "18093 2021-01-25                    Oregon    41   138587\n",
       "18094 2021-01-25              Pennsylvania    42   813665\n",
       "18095 2021-01-25               Puerto Rico    72   125211\n",
       "18096 2021-01-25              Rhode Island    44   111754\n",
       "18097 2021-01-25            South Carolina    45   421417\n",
       "18098 2021-01-25              South Dakota    46   107180\n",
       "18099 2021-01-25                 Tennessee    47   695935\n",
       "18100 2021-01-25                     Texas    48  2268260\n",
       "18101 2021-01-25                      Utah    49   337269\n",
       "18102 2021-01-25                   Vermont    50    11165\n",
       "18103 2021-01-25            Virgin Islands    78     2350\n",
       "18104 2021-01-25                  Virginia    51   478619\n",
       "18105 2021-01-25                Washington    53   306489\n",
       "18106 2021-01-25             West Virginia    54   115839\n",
       "18107 2021-01-25                 Wisconsin    55   582477\n",
       "18108 2021-01-25                   Wyoming    56    51062"
      ]
     },
     "execution_count": 121,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "states[states[\"date\"] == pd.to_datetime(date_selection.selected).round(\"1d\")[0]]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 127,
   "id": "sticky-collapse",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "98141a2033964b7e9f197453a17a2f77",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "Figure(axes=[ColorAxis(scale=ColorScale(scheme='BuPu'))], fig_margin={'top': 60, 'bottom': 60, 'left': 60, 'ri…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "proj = bqplot.AlbersUSA()\n",
    "color_sc = bqplot.ColorScale(scheme = \"BuPu\")\n",
    "color_ax = bqplot.ColorAxis(scale = color_sc)\n",
    "\n",
    "use_cases_by_date = states[states[\"date\"] == pd.to_datetime(date_selection.selected).round(\"1d\")[0]].groupby(\"fips\")[\"cases\"].sum().to_dict()\n",
    "map_mark = bqplot.Map(\n",
    "    map_data = state_map,\n",
    "    scales = {'projection': proj, 'color': color_sc},\n",
    "    color = use_cases_by_date\n",
    ")\n",
    "fig2 = bqplot.Figure(marks = [map_mark], axes = [color_ax])\n",
    "display(fig2)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 131,
   "id": "demonstrated-johnston",
   "metadata": {},
   "outputs": [],
   "source": [
    "def update_cases(change):\n",
    "    use_cases_by_date = states[states[\"date\"] == pd.to_datetime(date_selection.selected).round(\"1d\")[0]].groupby(\"fips\")[\"cases\"].sum().to_dict()\n",
    "    map_mark.color = use_cases_by_date\n",
    "\n",
    "date_selection.unobserve_all()\n",
    "date_selection.observe(update_cases, ['selected'])    "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 132,
   "id": "welcome-palestine",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "application/vnd.jupyter.widget-view+json": {
       "model_id": "e13e3acaa35141bb9adcc341e9f67c45",
       "version_major": 2,
       "version_minor": 0
      },
      "text/plain": [
       "VBox(children=(Figure(axes=[Axis(label='Date', scale=DateScale(), side='bottom'), Axis(label='Cases (cumulativ…"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "ipywidgets.VBox([fig1, fig2])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 135,
   "id": "arabic-increase",
   "metadata": {},
   "outputs": [],
   "source": [
    "color_sc.min = 0\n",
    "color_sc.max = states.groupby(\"state\")[\"cases\"].max().max()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "disturbed-richardson",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
